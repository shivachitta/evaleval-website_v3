<script>
document.addEventListener('DOMContentLoaded', function () {
    // Smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    // Hamburger menu toggle
    const toggleBtn = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeBtn = document.getElementById('menu-close');

    if (toggleBtn && mobileMenu) {
        toggleBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
        });
    }

    if (closeBtn && mobileMenu) {
        closeBtn.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });
    }

    // MathJax typeset (if used)
    if (typeof MathJax !== 'undefined') {
        MathJax.typesetPromise();
    }

    // Optional: Move footnotes to sidebar if needed
    const footnotes = document.querySelectorAll('.footnote-item');
    const footnoteContainer = document.getElementById('dynamic-footnotes');
    if (footnoteContainer && footnotes.length > 0) {
        footnotes.forEach(fn => {
            const clone = fn.cloneNode(true);
            footnoteContainer.appendChild(clone);
        });
    }
});
</script>
